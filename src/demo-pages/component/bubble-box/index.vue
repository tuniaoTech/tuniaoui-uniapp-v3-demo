<script lang="ts" setup>
import { onShareAppMessage, onShareTimeline } from '@dcloudio/uni-app'
import TnBubbleBox from '@tuniao/tnui-vue3-uniapp/components/bubble-box/src/bubble-box.vue'

import type { BubbleBoxOption } from '@tuniao/tnui-vue3-uniapp'

import CustomPage from '@/components/custom-page/src/custom-page.vue'
import DemoContainer from '@/components/demo-container/src/demo-container.vue'
import { useDemoH5Page, useWxShare } from '@/hooks'

// ÂæÆ‰ø°ÂàÜ‰∫´
onShareAppMessage(() => ({}))
onShareTimeline(() => ({}))
useWxShare({
  path: '/demo-pages/component/bubble-box/index',
})
const { isDemoH5Page } = useDemoH5Page()

// Ê∞îÊ≥°ÂºπÊ°ÜÊï∞ÊçÆ
const bubbleBoxOptions: BubbleBoxOption = [{ text: 'Êî∂Ëóè' }, { text: 'ÂàÜ‰∫´' }]

// Â∏¶ÂõæÊ†áÁöÑÊ∞îÊ≥°ÂºπÊ°ÜÊï∞ÊçÆ
const bubbleBoxOptionsWithIcon: BubbleBoxOption = [
  { text: 'Êî∂Ëóè', icon: 'star' },
  { text: 'ÂàÜ‰∫´', icon: 'share' },
]

// Â∏¶Á¶ÅÊ≠¢ÈÄâÈ°πÁöÑÊ∞îÊ≥°ÂºπÊ°ÜÊï∞ÊçÆ
const bubbleBoxOptionsWithDisabled: BubbleBoxOption = [
  { text: 'Êî∂Ëóè', icon: 'star' },
  { text: 'ÂàÜ‰∫´', icon: 'share' },
  { text: 'Âà†Èô§', icon: 'delete', disabled: true },
]

// Ê°à‰æãÊºîÁ§∫Êï∞ÊçÆ
const menu1BubbleOptions: BubbleBoxOption = [
  { text: 'ÂõæÈ∏üUI-VUE3' },
  { text: 'ÂõæÈ∏üUI' },
  { text: 'ÂõæÈ∏üÂçöÂÆ¢' },
  { text: 'ÂõæÈ∏üÂúàÂ≠ê' },
  { text: 'Âá∂ÂßêÂ£ÅÁ∫∏' },
]
const menu2BubbleOptions: BubbleBoxOption = [
  { text: 'vue3‰ΩøÁî®ÊñáÊ°£' },
  { text: 'vue2‰ΩøÁî®ÊñáÊ°£' },
  { text: 'github' },
  { text: '‰ΩøÁî®ËßÜÈ¢ë' },
  { text: 'ÂõæÈ∏üÁ¥†Êùê' },
]
const menu3BubbleOptions: BubbleBoxOption = [
  { text: 'vue3‰ΩøÁî®ÊñáÊ°£' },
  { text: 'vue2‰ΩøÁî®ÊñáÊ°£' },
]

// ÈÄâÈ°πÁÇπÂáª‰∫ã‰ª∂
const onBubbleOptionClickEvent = (index: number) => {
  uni.showToast({
    title: `ÊÇ®ÈÄâÊã©‰∫Ü ${bubbleBoxOptions[index].text}`,
    icon: 'none',
  })
}
</script>

<template>
  <CustomPage
    title="Ê∞îÊ≥°ÂºπÊ°Ü"
    :is-h5-demo-page="isDemoH5Page"
    content-full-width
  >
    <DemoContainer title="Âü∫Á°Ä‰ΩøÁî®">
      <view class="bubble-box-container">
        <view class="bubble-box-item top-empty fit-content">
          <TnBubbleBox
            :options="bubbleBoxOptions"
            @click="onBubbleOptionClickEvent"
          >
            ÁÇπÂáªÂºπÂá∫Ê∞îÊ≥°Ê°Ü
          </TnBubbleBox>
        </view>
      </view>
    </DemoContainer>
    <DemoContainer title="Â∏¶ÂõæÊ†áÈÄâÈ°π">
      <view class="bubble-box-container">
        <view class="bubble-box-item top-empty fit-content">
          <TnBubbleBox :options="bubbleBoxOptionsWithIcon">
            ÁÇπÂáªÂºπÂá∫Ê∞îÊ≥°Ê°Ü
          </TnBubbleBox>
        </view>
      </view>
    </DemoContainer>
    <DemoContainer title="Â∏¶Á¶ÅÊ≠¢ÈÄâÈ°π">
      <view class="bubble-box-container">
        <view class="bubble-box-item top-empty fit-content">
          <TnBubbleBox :options="bubbleBoxOptionsWithDisabled">
            ÁÇπÂáªÂºπÂá∫Ê∞îÊ≥°Ê°Ü
          </TnBubbleBox>
        </view>
      </view>
    </DemoContainer>
    <DemoContainer title="‰øÆÊîπÊ∞îÊ≥°ÂºπÂá∫‰ΩçÁΩÆ">
      <view class="bubble-box-container">
        <view class="bubble-box-position-demo">
          <view class="left">
            <view class="item">
              <TnBubbleBox position="right" :options="bubbleBoxOptions">
                Âè≥ËæπÊ∞îÊ≥°
              </TnBubbleBox>
            </view>
          </view>
          <view class="center">
            <view class="item">
              <TnBubbleBox position="bottom" :options="bubbleBoxOptions">
                Â∫ïÈÉ®Ê∞îÊ≥°
              </TnBubbleBox>
            </view>
            <view class="item">
              <TnBubbleBox position="top" :options="bubbleBoxOptions">
                È°∂ÈÉ®Ê∞îÊ≥°
              </TnBubbleBox>
            </view>
          </view>
          <view class="right">
            <view class="item">
              <TnBubbleBox position="left" :options="bubbleBoxOptions">
                Â∑¶ËæπÊ∞îÊ≥°
              </TnBubbleBox>
            </view>
          </view>
        </view>
      </view>
    </DemoContainer>
    <DemoContainer title="‰øÆÊîπÈ¢úËâ≤">
      <view class="bubble-box-container">
        <view class="bubble-box-item top-empty fit-content">
          <TnBubbleBox
            bg-color="tn-gray-light"
            text-color="tn-gray"
            :options="bubbleBoxOptionsWithIcon"
          >
            ÁÇπÂáªÂºπÂá∫Ê∞îÊ≥°Ê°Ü
          </TnBubbleBox>
        </view>
      </view>
    </DemoContainer>
    <DemoContainer title="Ê°à‰æã">
      <view class="bubble-box-demo1">
        <view class="menu-item">
          <TnBubbleBox
            :options="menu1BubbleOptions"
            option-item-padding="30rpx"
          >
            <view class="content">ü•∞ ÂõæÈ∏ü</view>
          </TnBubbleBox>
        </view>
        <view class="menu-item">
          <TnBubbleBox
            :options="menu2BubbleOptions"
            option-item-padding="30rpx"
          >
            <view class="content">üòç ÊñáÊ°£</view>
          </TnBubbleBox>
        </view>
        <view class="menu-item">
          <TnBubbleBox
            :options="menu3BubbleOptions"
            width="300"
            option-item-padding="30rpx"
          >
            <view class="content">Â•ΩÊñáÊé®Ëçê</view>
          </TnBubbleBox>
        </view>
      </view>
    </DemoContainer>
  </CustomPage>
</template>

<style lang="scss" scoped>
@import './styles/index.scss';
</style>
